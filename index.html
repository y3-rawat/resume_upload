<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATS Resume Analyzer Pro</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>


<body class="bg-gray-100">
    <div id="loader" class="hidden">
        
        <div class="loading">
            <div class="loading-wide">
                <div class="l1 color"></div>
                <div class="l2 color"></div>
                <div class="e1 color animation-effect-light"></div>
                <div class="e2 color animation-effect-light-d"></div>
                <div class="e3 animation-effect-rot">X</div>
                <div class="e4 color animation-effect-light"></div>
                <div class="e5 color animation-effect-light-d"></div>
                <div class="e6 animation-effect-scale">*</div>
                <div class="e7 color"></div>
                <div class="e8 color"></div>
            </div>
        </div>
    </div>
    <div class="container mx-auto px-4 py-8">
       

        <header class="text-center mb-8">

            <!-- <p class="text-gray-600 mt-2">Optimize your resume for Applicant Tracking Systems</p> -->
        </header>
        

        <main class="grid grid-cols-1 md:grid-cols-2 gap-8 o">

            <section class="order-2 md:order-1 space-y-6">
                <h1 class="text-4xl font-bold text-gray-800">
                    <img src="https://res.cloudinary.com/dg9wkitg0/image/upload/v1724043178/r1mp5odnj5z6tnhgfj9e.svg"
                        alt="">
                </h1>
                <form id="resumeForm">

                    <div class="card">
                        <h2 class="text-2xl font-semibold mb-4 text-primary">
                            <i class="fas fa-briefcase mr-2"></i>Job Details
                        </h2>
                        <div class="space-y-4">
                            <div>
                                <label for="jobDescription" class="block text-sm font-medium mb-1">Job
                                    Description</label>
                                <textarea id="jobDescription" name="jobDescription" rows="5" class="input-field"
                                    placeholder="Paste the job description here..." required></textarea>

                            </div>
                            <div>
                                <label for="additionalInfo" class="block text-sm font-medium mb-1">Additional
                                    Information</label>
                                <textarea id="additionalInfo" name="additionalInfo" rows="3" class="input-field"
                                    placeholder="Add other relevant information..."></textarea>
                            </div>
                        </div>

                    </div>

                    <div style="padding-top: 10px;"></div>


                    <div class="card">
                        <h2 class="text-2xl font-semibold mb-4 text-primary">
                            <i class="fas fa-user-tie mr-2"></i>Experience Level
                        </h2>
                        <div class="space-y-2">
                            <div class="flex items-center space-x-4">
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="experience" value="Experience" required
                                        class="form-radio text-primary">
                                    <span>Experienced</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="experience" value="NoExperience" required
                                        class="form-radio text-primary">
                                    <span>No Experience</span>
                                </label>
                            </div>
                        </div>

                        <div id="status"></div>
                    </div>
            </section>

            <section class="order-1 md:order-2">
                <div style="margin-top: 30px;"></div>
                <div class="card h-full flex flex-col">

                    <h2 class="text-2xl font-semibold mb-4 text-primary">
                        <i class="fas fa-file-upload mr-2"></i>Upload Your Resume
                    </h2>
                    <div class="upload-area flex-grow" id="dropArea">
                        <input type="file" id="file-upload" name="file-upload" accept=".pdf" class="sr-only" required>
                        <label for="file-upload" class="cursor-pointer">
                            <i class="fas fa-cloud-upload-alt text-5xl text-primary mb-4"></i>
                            <p class="text-lg font-medium"> Click to Upload</p>
                            <p class="text-sm text-gray-600 mt-2">Supports PDF up to 10MB</p>
                            <p id="fileName" class="text-sm text-gray-600 mt-2"></p>

                        </label>

                    </div>

                    <div class="progress-bar-container hidden mt-4" id="progressBarContainer">
                        <div class="progress-bar bg-primary h-2 rounded-full" id="progressBar"></div>
                    </div>

                    <p id="fileInfo" class="success-message hidden mt-2"></p>
                    <p id="resumeError" class="error-message hidden mt-2"></p>
                </div>
                <div style="margin: 1%;"></div>
                
                <div class="card">
                    <label for="groq-api" style="font-size:14px;font-weight:500;">
                        Enter the Api of Groq (it's Free & We are not Saving it)
                        <button onclick="openSmallWindow()"
                            style="color:#0066FF;text-decoration:underline;font-weight: bold;">Click Here!</button>
                    </label>
                    <div class="input-wrapper">
                        <input type="text" id="groq-api" name="groq-api" class="input-field"
                            placeholder="Enter your Groq API key" required>
                        <div class="info-button"
                            onclick="showModal()">
                            Why?
                    </div>
                </div>

                <div style="margin: 1%;"></div>
                <!-- The Modal -->
                <div id="myModal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeModal()">&times;</span>
                        <p>Due to high demand, we are currently unable to fulfill requests as expected, which has led to the termination of the account. <br> <br>
                            Groq key will allow us to connect and interact with the Groq service effectively and we are not storing your api keys.
                            <br> <br>
                            Thank you for your understanding and cooperation..</p>
                        <img src="https://res.cloudinary.com/dg9wkitg0/image/upload/v1724043061/edyszju6qmd8yrfvhjqa.png"
                            alt="Explanation Image">
                    </div>
                </div>

                <script>
                    function openSmallWindow() {
                        const width = 1000;
                        const height = 600;
                        const left = (window.screen.width - width) / 2;
                        const top = (window.screen.height - height) / 2;

                        window.open(
                            'https://console.groq.com/keys',
                            'smallWindow',
                            `width=${width},height=${height},top=${top},left=${left},resizable=yes,scrollbars=yes`
                        );
                    }

                    function showModal() {
                        const modal = document.getElementById('myModal');
                        modal.classList.remove('hide');
                        modal.classList.add('show');
                        modal.style.display = 'flex';
                    }

                    function closeModal() {
                        const modal = document.getElementById('myModal');
                        modal.classList.remove('show');
                        modal.classList.add('hide');
                        setTimeout(() => {
                            modal.style.display = 'none';
                        }, 300); // Match with the CSS transition time
                    }

                    // Ensure modal is hidden initially
                    document.getElementById('myModal').style.display = 'none';
                    document.getElementById('myModal').classList.add('hide');
                </script>
                <div class="card">
                    <div class="space-y-2">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-search-plus"></i>
                            <span>Analyze Resume</span>
                        </button>

                    </div>
                </div>


                </form>

            </section>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const dropArea = document.getElementById('dropArea');
            const fileInput = document.getElementById('file-upload');
            const fileNameDisplay = document.getElementById('fileName');
            const resumeError = document.getElementById('resumeError');
            const fileInfo = document.getElementById('fileInfo');
            const form = document.getElementById('resumeForm');
            const progressBar = document.getElementById('progressBar');
            const jobDescription = document.getElementById('jobDescription');
            const additionalInfo = document.getElementById('additionalInfo');
            const statusDiv = document.getElementById('status');
            const api = document.getElementById('groq-api');
            const loader = document.getElementById('loader');
        
            fileInput.addEventListener('change', function () {
                if (fileInput.files.length > 0) {
                    const file = fileInput.files[0];
                    fileNameDisplay.textContent = `Selected file: ${file.name}`;
                } else {
                    fileNameDisplay.textContent = '';
                }
            });
            form.addEventListener('submit', function (e) {
    e.preventDefault();

    let file = fileInput.files[0];
    if (!file) {
        updateStatus('Please select a file to upload.', 'red');
        return;
    }

    if (file.type !== 'application/pdf') {
        updateStatus('Please select a PDF file.', 'red');
        return;
    }

    let selectedExperience = document.querySelector('input[name="experience"]:checked');
    if (!selectedExperience) {
        updateStatus('Please select your experience level.', 'red');
        return;
    }

    let formData = new FormData(form);

    updateStatus('Uploading file...', 'blue');
    showLoader();

    fetch('/api/upload', {
        method: 'POST',
        body: formData
    }).then(response => {
        if (response.redirected) {
            updateStatus('Processing your resume...', 'blue');
            window.location.href = response.url;
        } else {
            return response.json();
        }
    }).then(data => {
        if (data && !data.success) {
            updateStatus(data.message || 'An error occurred', 'red');
        }
    }).catch(error => {
        console.error('Error:', error);
        updateStatus('An error occurred while processing your request.', 'red');
    }).finally(() => {
        hideLoader();
    });
});

function updateStatus(message, color) {
    statusDiv.textContent = message;
    statusDiv.style.color = color;
}

function showLoader() {
    loader.classList.remove('hidden');
}

function hideLoader() {
    loader.classList.add('hidden');
}

        });
        
        function openSmallWindow() {
            const width = 1000;
            const height = 600;
            const left = (window.screen.width - width) / 2;
            const top = (window.screen.height - height) / 2;
        
            window.open(
                'https://console.groq.com/keys',
                'smallWindow',
                `width=${width},height=${height},top=${top},left=${left},resizable=yes,scrollbars=yes`
            );
        }
        
        function showModal() {
            const modal = document.getElementById('myModal');
            modal.classList.remove('hide');
            modal.classList.add('show');
            modal.style.display = 'flex';
        }
        
        function closeModal() {
            const modal = document.getElementById('myModal');
            modal.classList.remove('show');
            modal.classList.add('hide');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300); // Match with the CSS transition time
        }
        
        // Ensure modal is hidden initially
        document.getElementById('myModal').style.display = 'none';
        document.getElementById('myModal').classList.add('hide');
        </script>
  

</body>

</html>